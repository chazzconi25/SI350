
<!DOCTYPE html>
<!-- Lab 09 page-->
<html lang="en">
<!-- CSS and meta information-->
    <head>
        <meta charset="utf-8" />
        <meta name="author" content="Charlie Francesconi">
        <link rel="stylesheet" href="../styles.css">
        <title>Lab 09</title>
        <style>
        body {
            text-align: center;
        }
        datalist {
            color: white;
        }
        </style>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    </head>

    <body>
        <form>
            <label for="years">Years to Calculate:</label>
            <input type="number" name="years" id="years" value=<?php keepVal("years")?>><br>
            <label for="roi">Expected Rate of Return:</label>
            <input type="number" name="roi" id="roi" value=<?php keepVal("roi")?>><br>
            <label for="initial">Initial Investment:</label>
            <input type="number" name="initial" id="initial" value=<?php keepVal("initial")?>><br>
            <label>Additional Investment:</label>
            <label for="ystrt">Start at Year:</label>
            <input type="number" name="ystrt" id="ystrt">
            <label for="pmnth">Additional amount per month:</label>
            <input type="number" name="pmnth" id="pmnth"><br>
            <input type ="submit" value="Calculate" name="calculate" id="calculate">
            <input type ="submit" value="Start Over" name="reset" id="reset">
        </form>
        <table>
            <tr>
                <th>
                    Year
                </th>
                <th>
                    Amount
                </th>
            </tr>
        </table>
        <script type="text/javascript">
            var json_data = [];
            var today = new Date();
            function addMonths(date, months) {
                var d = date.getDate();
                date.setMonth(date.getMonth() + months);
                if (date.getDate() != d) {
                    date.setDate(0);
                }
                return date;
            }


            //
            for(var i = 0; i < json_data.length; i++){
                json_data[i][0] = addMonths(today, json_data[i][0]);
                today = new Date();
            }
            console.log(json_data);

            google.charts.load('current', {'packages':['corechart','line']});
            google.charts.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = new google.visualization.DataTable();
                data.addColumn('date', 'Date');
                data.addColumn('number', 'Additional Principle');
                data.addColumn('number', 'Balance');
                data.addColumn('number', 'Balance with Inintal Investment');
                data.addRows(json_data);
                
                var options = {
                    curveType: 'function',
                    vAxis: {
                        title: 'Amount',
                        logScale: false,
                        slantedText: true
                    },
                    hAxis: {
                        title: 'Investment Preformance',
                        logScale: true,
                        gridlines: {count: json_data.length},
                        slantedText: true
                    }
                };
                    var chart = new google.charts.Line(document.getElementById('linechart_material'));

                    chart.draw(data, google.charts.Line.convertOptions(options));
            }
        </script>
        <div id="linechart_material" ></div>
    </body>

</html>